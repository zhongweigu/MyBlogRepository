---
title: ç¼–è¯‘åŸç†Reviw
date: 2025-06-18 19:50:01
categories:   "è¯¾ç¨‹å¤ä¹ "
tags: [ç¼–è¯‘åŸç†]
toc : true
---

# The Compilersâ€™ Front End

## Regex -> NFA -> (Min) DFA

**Regex describes a language**

Example: $ (ğ‘|ğ‘)^âˆ—c$

> Given two regex: $r_1,r_2$, the following are regex:
>
> 1. $ğ¿(ğ‘Ÿ_1 | ğ‘Ÿ_2) =ğ¿(ğ‘Ÿ_1)âˆªğ¿(ğ‘Ÿ_2)$
> 2. $ğ¿(r_1r_2) =ğ¿(ğ‘Ÿ_1)ğ¿(ğ‘Ÿ_2)$
> 3. $ğ¿(ğ‘Ÿ_1^âˆ—) = (ğ¿(ğ‘Ÿ_1))^âˆ—$
> 4. $ğ¿((ğ‘Ÿ_1)) = ğ¿(ğ‘Ÿ_1)$

**Primitive regex**

<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618095230189.png" alt="image-20250618095230189" style="zoom: 50%;" />

### â­Build the NFA for the regex

#### Rules

1. $L_1 âˆª L_2$

   â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618101108287.png" alt="image-20250618101108287" style="zoom: 50%;" />

2. $L_1L_2$

   â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618101134835.png" alt="image-20250618101134835" style="zoom:50%;" />

3. $L_1^R$

   â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618101203899.png" alt="image-20250618101203899" style="zoom:50%;" />

4. $L_1^*$

   â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618101242546.png" alt="image-20250618101242546" style="zoom:50%;" />

5. $\overline{L_1}$

   â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750212825221-1.png" alt="img" style="zoom:50%;" />

6. $L_1 \cap L_2 = \overline{\overline{L_1} \cup \overline{L_2}}$

#### Laws

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750212922640-4.png" alt="img" style="zoom:50%;" />

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750212922641-5.png" alt="img" style="zoom:50%;" />

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750212922641-6.png" alt="img" style="zoom:50%;" />

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750212922641-7.png" alt="img" style="zoom:50%;" />

#### Example

 $(ğ‘|ğ‘)^âˆ—c$

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618095557414.png" alt="image-20250618095557414" style="zoom: 33%;" />

### â­From NFA to DFA

**A <u>subset</u> of NFA states is a DFA state**

#### Steps: Subset Construction

**Îµ-closureï¼šæŒ‡å½“å‰çŠ¶æ€ä»¥åŠå½“å‰çŠ¶æ€é€šè¿‡ä¸€æ¬¡æˆ–å¤šæ¬¡Îµè½¬ç§»å¯ä»¥åˆ°è¾¾çš„çŠ¶æ€çš„é›†åˆ**

1. åˆå§‹**Îµé—­åŒ…**ä¸º$Q_0$
2. å¯¹äº$Q_i$ï¼Œæ±‚å…¶ç»è¿‡æŸè¾“å…¥ç¬¦å·(æ¯”å¦‚è¯´x)åå¯è¾¾çš„çŠ¶æ€é›†åˆ(åŒ…æ‹¬è¿™äº›çŠ¶æ€çš„Îµé—­åŒ…çš„å…ƒç´ )ä¸º$Q_{i+1}$
3. æ„é€ è·¯å¾„ $Q_i \overset{x}{\rightarrow} Q_{i+1}$
4. å¦‚æœæŸä¸ªQåŒ…å«**ç»ˆç»“çŠ¶æ€**ï¼ŒQä¹Ÿè®¾ä¸ºç»ˆç»“çŠ¶æ€
5. é‡å¤è¿‡ç¨‹2ï¼Œ3

![image-20250618103731621](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618103731621.png)

#### Example

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618102544960.png" alt="image-20250618102544960" style="zoom:50%;" />

### â­DFA Minimization

#### Steps

1. æŠŠ**ç»ˆç»“çŠ¶æ€é›†**å’Œ**éç»ˆç»“çŠ¶æ€é›†**åˆ†å¼€ï¼Œåˆ†åˆ«è€ƒå¯Ÿæ˜¯å¦å¯ä»¥å†åŒºåˆ†
2. å¯¹äºä»»æ„ä¸€ä¸ªçŠ¶æ€é›†åˆï¼Œè€ƒå¯Ÿä»–ä»¬å¯¹äºåŒä¸€è¾“å…¥çš„ç»“æœæ˜¯å¦åœ¨åŒä¸€é›†åˆå†…ï¼Œæ˜¯ï¼Œåˆ™ä¸ç”¨å†åŒºåˆ†ï¼›å¦ï¼Œæ ¹æ®ä¸åŒç»“æœåŒºåˆ†ï¼›
3. é‡å¤è¿‡ç¨‹2ç›´åˆ°æ²¡æœ‰é›†åˆå¯ä»¥å†åŒºåˆ†

#### Example

<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618104937241.png" alt="image-20250618104937241" style="zoom:80%;" />



â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618105446959.png" alt="image-20250618105446959" style="zoom:50%;" />

### DFA to Regex

â€‹	![image-20250618110011890](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618110011890.png)

## CFG and Parsing

**A context-free grammar is a tuple** ğº = (ğ‘,ğ‘‡,ğ‘†,ğ‘ƒ)

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750215493909-16.png" alt="img" style="zoom: 67%;" />

### â­Context Free Grammar (CFG)

From Regex to CFG

1. $0^*1^*$

   ```
   S -> A B
   A -> Îµ | A 0
   B -> Îµ | B 1
   ```

2. $0^n1^n$

   ```
   S -> 0 S 1 | Îµ
   ```

3. $0^n1^{2n}$

   ```
   S -> 0 S 11 | Îµ
   ```

4. $ğ‘^iğ‘^jğ‘^k$ where i = j or j = k

   ```
   S -> M N | P Q
   M -> a M b | Îµ
   N -> N c | Îµ
   P -> P a | Îµ
   Q -> b Q c | Îµ
   ```

### â­Eliminating Left-Recursion

Non-terminal A that $A \Rightarrow^+ A \alpha$

**ç«‹å³å·¦é€’å½’**ï¼Œå½¢å¦‚ï¼š$$A \rightarrow A \alpha | \beta$$ï¼Œå¯ä»¥æ”¹å†™ä¸ºï¼š

$$A \rightarrow \beta A' \\ A' \rightarrow \alpha A' | \epsilon$$

ä¸€èˆ¬çš„ï¼ˆ**æ³¨æ„**$\epsilon$ï¼‰ï¼Œ

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750223438655-19.png" alt="img" style="zoom: 33%;" />

**é—´æ¥å·¦é€’å½’**ï¼Œç»è¿‡**å¤šæ¬¡æ¨å¯¼**å¾—åˆ°$A\alpha |\beta$

<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750223438655-20.png" alt="img" style="zoom:50%;" />

> ä¸€å®šä¸è¦å¿˜äº†$\epsilon$ï¼Œå¯¹äºé—´æ¥å·¦é€’å½’ï¼Œå…ˆå¤„ç†å¯ä»¥ç›´æ¥å¤„ç†çš„ï¼Œç„¶åæ¨å¯¼è‡³æ²¡æœ‰å·¦é€’å½’ä¸ºæ­¢

### â­LL(1)

> LL(1)çš„å«ä¹‰ä¸ºï¼šç¬¬ä¸€ä¸ªLè¡¨æ˜è‡ªé¡¶å‘ä¸‹åˆ†ææ—¶ä»å·¦å‘å³æ‰«æè¾“å…¥ä¸²ï¼Œç¬¬äºŒä¸ªLè¡¨æ˜åˆ†æè¿‡ç¨‹å°†æœ€å·¦æ¨å¯¼ï¼Œ1è¡¨æ˜åªéœ€å‘å³çœ‹ä¸€ä¸ªç¬¦å·ä¾¿å¯å†³å®šå¦‚ä½•æ¨å¯¼ï¼Œå³é€‰æ‹©é‚£ä¸ªäº§ç”Ÿå¼è¿›è¡Œæ¨å¯¼ã€‚
> è¯´çš„æ˜¯ç¼–è¯‘å™¨ä»ä½ å†™çš„ä»£ç ä¸­çš„æ¯è¡Œçš„å·¦è¾¹å¼€å§‹è¯»å–å­—ç¬¦ï¼Œåˆ°å³è¾¹ç»“æŸè¿›è¡Œä¸‹ä¸€è¡Œè¯»å–ï¼›åˆ†æä¹Ÿæ˜¯ä»æ¯è¡Œä»£ç çš„å·¦è¾¹å­—ç¬¦å¼€å§‹ï¼Œåˆ°å³è¾¹ç»“æŸè¿›è¡Œä¸‹ä¸€è¡Œï¼›1è¡¨ç¤ºä¸€ç§çŠ¶æ€æ¥å—è¾“å…¥æ—¶èƒ½å”¯ä¸€çš„ç¡®å®šä¸‹é¢çš„çŠ¶æ€ã€‚

#### LL(1) rules

ä¸€ä¸ªæ–‡æ³•æ˜¯ LL(1) çš„å½“ä¸”ä»…å½“ï¼š

1. ä¸å« **å·¦é€’å½’**
2. å¯¹æ¯ä¸ªéç»ˆç»“ç¬¦ `A` å’Œä»»æ„ä¸¤æ¡äº§ç”Ÿå¼ `A â†’ Î± | Î²`ï¼Œæ»¡è¶³ï¼šFIRST(*Î±*)âˆ©FIRST(*Î²*)=âˆ…
3. è‹¥ `Îµ âˆˆ FIRST(Î±)`ï¼Œåˆ™å¿…é¡»æ»¡è¶³ï¼šFIRST(*Î²*)âˆ©FOLLOW(*A*)=âˆ…

#### parsing table

**FIRSIT() å¼€å§‹ç¬¦å·é›†**
å°±æ˜¯æ‰¾æ‹¬å·é‡Œ**ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç»ˆç»“å­—ç¬¦é›†**ï¼Œå¦‚ä¸‹é¢æ‰¾Açš„å¼€å§‹å­—ç¬¦é›†ï¼Œæ˜¾è€Œæ˜“è§ï¼Œå®ƒçš„ä¸¤ä¸ªéç»ˆç»“å­—ç¬¦å¦‚ä¸‹å›¾ã€‚

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /3e241ee3303cbce7d77b39882b321c97.png" alt="img" style="zoom:80%;" />

**FOLLOW()åè·Ÿç¬¦å·é›†**
åŒç†ï¼Œå¯»æ‰¾æ‹¬å·å†…**åè¾¹ç´§è·Ÿçš„ç»ˆç»“å­—ç¬¦é›†**ï¼Œä¸‹å›¾è·Ÿåœ¨Aåé¢çš„Sä¸ºéç©ºç»ˆç»“ç¬¦ï¼Œä½†æˆ‘ä»¬è¦çš„æ˜¯ç»ˆç»“ç¬¦ï¼Œå¯¹Sæ±‚FIRSTå¾—åˆ°aå’Œdï¼›è¿˜æœ‰ä¸€ä¸ª**åé¢ä»€ä¹ˆä¹Ÿæ²¡è·Ÿï¼Œé‚£å°±æ˜¯$**ï¼Œç»¼ä¸Šå°±å¯ä»¥å¾—åˆ°ä¸‹é¢çš„ç­”æ¡ˆã€‚

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /0f02629da53c0ca789ca81a242f1dbcc.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" style="zoom:80%;" />

> è¯¾ä»¶é‡Œè¯´çš„æ˜¯$ï¼Œæœ€å¥½æŒ‰è¯¾ä»¶æ¥
>
> FIRST()åœ¨å†…éƒ¨ï¼ŒFOLLOW()åœ¨å¤–éƒ¨

<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618140741919.png" alt="image-20250618140741919" style="zoom:80%;" />

åœ¨ä¸Šä¾‹ä¸­:

| éç»ˆç»“ç¬¦ | FIRSTé›†   | FOLLOWé›†       |
| -------- | --------- | -------------- |
| `E`      | `{(, id}` | `{), $}`       |
| `E'`     | `{+, Îµ}`  | `{), $}`       |
| `T`      | `{(, id}` | `{+, ), $}`    |
| `T'`     | `{*, Îµ}`  | `{+, ), $}`    |
| `F`      | `{(, id}` | `{*, +, ), $}` |

1. å¯¹äºFIRST(Î±)ä¸­çš„æ¯ä¸ªç»ˆç»“ç¬¦aï¼Œå°†Aâ†’Î±åŠ å…¥åˆ°M[A, a]ä¸­

2. å¦‚æœFIRST(Î±)ä¸­æœ‰Îµï¼Œå³å¯èƒ½æ¨å¯¼å‡ºç©ºï¼Œå°±æ‰¾FOLLOWé›†å¯¹åº”çš„ä½ç½®å¡«Aâ†’Î±

   > æ¯”å¦‚è¿™é‡Œæœ‰ `E'->Îµ`ï¼Œè€Œ`FOLLOW(E')={), $}`ï¼Œé‚£ä¹ˆå°±åœ¨M[Eâ€™,)]å’ŒM[Eâ€™,$]çš„åœ°æ–¹å†™`E'->Îµ`

## IR Generation

### Three-Address Code

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618142710982.png" alt="image-20250618142710982" style="zoom: 33%;" />

å››å…ƒå¼æ³•ï¼š

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750228656855-29.png" alt="img" style="zoom: 33%;" />

### Static Single-Assignment

â€¢ Feature 1: Every variable has only one definition 

â€¢ Feature 2: Using Ï† to merge definitions from multi paths

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618142755045.png" alt="image-20250618142755045" style="zoom: 33%;" />

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750228732966-32.png" alt="img" style="zoom:33%;" />

### â­Dominance Relations

â€¢ **A dom B**  

- if all paths from Entry to B goes through A 

â€¢ **A post-dom B** 

- if all paths from B to Exit goes through A

> ä¸¥æ ¼æ”¯é…ï¼ˆè¢«æ”¯é…ï¼‰ï¼šA (post-)dom B but A â‰  B
>
> ç›´æ¥æ”¯é… A strict-dom B, but thereâ€™s no C, such that A strict-dom C, C strict-dom B

**Dominator Tree**

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618143030958.png" alt="image-20250618143030958" style="zoom: 33%;" />

**Dominance Frontier**

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618143116345.png" alt="image-20250618143116345" style="zoom: 33%;" />

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750228802350-35.png" alt="img" style="zoom:33%;" />

> æ”¯é…è¾¹ç•Œï¼Œé¡¾åæ€ä¹‰å°±æ˜¯æ”¯é…åŒºåŸŸçš„è¾¹ç•Œï¼Œè¿™ä¸ªè¾¹ç•Œæœ¬èº«ä¸å±äºè¢«æ”¯é…çš„éƒ¨åˆ†

**Iterated Dominance Frontier**

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618144848972.png" alt="image-20250618144848972" style="zoom:33%;" />

IDF({A,B,C})={E,F}

#  The Compilersâ€™ Middle End

## â­Data Flow Analysis

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618145128887.png" alt="image-20250618145128887" style="zoom: 33%;" />

**To perform data flow analysis, define** 

- transfer function $f$ for each statement/block 
- merge function $âˆ§$ at the joint point of multiple paths 
- the initial set of data flow facts for each block

**Data flow analysis produces** 

- IN[B]/OUT[B] that include data flow facts at a program point 
- The resulting data flow facts are always true during program execution

**The Worklist Algorithm**

```assembly
ForEach 
	basic block B: initialize IN[B] and OUT[B]; 
EndFor
worklist = set of all basic blocks;

While (!worklist.empty()) Do;
	B = worklist.pop();
	IN[B] = âˆ§PâˆŠpreds(B) OUT[P];   
	OUT[B] = fB(IN[B]);
	If OUT[B] changed: 
		worklist.push(all Bâ€™s successors); 
	EndIf
EndWhile
```

### Reaching Definition

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750230812177-38.png" alt="img" style="zoom:50%;" />

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750231502815-41.png" alt="img" style="zoom: 67%;" />

> genæ˜¯æŒ‡æ–°å®šä¹‰ï¼ŒåŒ…å«å®šä¹‰æ–°å˜é‡å’Œæ—§å˜é‡é‡æ–°èµ‹å€¼
>
> killæ˜¯æŒ‡æ—§å®šä¹‰è¢«è¦†ç›–
>
> B4ä¸­ï¼Œd7æ˜¯genï¼Œè€Œä¹‹å‰çš„d1ï¼Œd4å°±è¢«killäº†ï¼ˆd1ï¼Œd4éƒ½æ˜¯å¯¹içš„èµ‹å€¼ï¼‰

###   Available Expressions

  åœ¨ç¨‹åºç‚¹ `p` å¤„ï¼Œè¡¨è¾¾å¼ `e` æ˜¯å¯ç”¨çš„ï¼Œå½“ä¸”ä»…å½“ï¼š

1. **å·²è®¡ç®—**ï¼šä»ç¨‹åºå…¥å£åˆ° `p` çš„æ‰€æœ‰è·¯å¾„ä¸Šï¼Œ`e` å‡å·²è¢«è®¡ç®—è¿‡ã€‚
2. **æœªè¢«ä¿®æ”¹**ï¼šæ‰€æœ‰è·¯å¾„ä¸Š `e` çš„æ“ä½œæ•°ï¼ˆå˜é‡ï¼‰åœ¨æœ€åä¸€æ¬¡è®¡ç®— `e` åæœªè¢«é‡æ–°å®šä¹‰ã€‚

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750234344359-44.png" alt="img" style="zoom:80%;" />

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750234386404-47.png" alt="img" style="zoom:80%;" />

> c=b+c ï¼Œcçš„å€¼å‘ç”Ÿäº†å˜åŒ–

### Live Variables

ç‚¹ p å¤„çš„å˜é‡ x çš„å€¼æ˜¯å¦å¯ä»¥æ²¿ä» p å¼€å§‹çš„è·¯å¾„ä¸Šç»§ç»­ä½¿ç”¨

### Summary	

![img](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750234481286-56.png)

## â­Symbolic Execution

â€¢ Path Sensitivityï¼šåˆ†ææ—¶åŒºåˆ†ä¸åŒæ‰§è¡Œè·¯å¾„ï¼ˆå¦‚æ¡ä»¶åˆ†æ”¯ã€å¾ªç¯ï¼‰ï¼Œä¸ºæ¯æ¡è·¯å¾„ç”Ÿæˆç‹¬ç«‹çš„çŠ¶æ€ 

â€¢ Flow Sensitivityï¼šåˆ†ææ—¶è€ƒè™‘è¯­å¥çš„æ‰§è¡Œé¡ºåºï¼Œä½†å¿½ç•¥ä¸åŒè·¯å¾„ï¼ˆå¦‚æ¡ä»¶åˆ†æ”¯ï¼‰çš„å·®å¼‚

â€¢ Context Sensitivityï¼š

Symbolic execution is a classic **path-sensitive** analysis that  enumerates and analyzes each path of a program

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618171806254.png" alt="image-20250618171806254" style="zoom: 33%;" />

![image-20250618192217711](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618192217711.png)

> checkçš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆæœ€åasserté‡Œçš„å¼å­è¦å–åå‘¢ï¼Ÿ
>
> å½“ç¨‹åºæ‰§è¡Œåˆ° `assert(condition)` æ—¶ï¼Œå¦‚æœ `condition` ä¸º `false`ï¼Œç¨‹åºä¼šç«‹å³æŠ›å‡º `AssertionError` å¼‚å¸¸å¹¶ç»ˆæ­¢ã€‚
> **è¿™ä»£è¡¨ç¨‹åºé€»è¾‘ä¸é¢„æœŸä¸¥é‡ä¸ç¬¦**
>
> æˆ‘ä»¬ä¸å¸Œæœ›ä»»ä½•è¾“å…¥è§¦å‘æ–­è¨€å¤±è´¥ï¼ˆå³å¼‚å¸¸ï¼‰ï¼Œäºæ˜¯ç¬¦å·æ‰§è¡Œä¼šåœ¨ç¨‹åºè¿è¡Œå‰ **é™æ€åˆ†ææ‰€æœ‰è·¯å¾„**ï¼Œå¹¶å›ç­”å…³é”®é—®é¢˜ï¼š
>
> **æ˜¯å¦å­˜åœ¨æŸç§è¾“å…¥ï¼Œä½¿å¾—ç¨‹åºæ‰§è¡Œåˆ° `assert` æ—¶ï¼Œæ¡ä»¶ä¸ºå‡ï¼Ÿ**
>
> å½“å‰è·¯å¾„çº¦æŸ(Ï€) âˆ§ Â¬(cond)ï¼Œå³è·¯å¾„çº¦æŸ + æ–­è¨€å¤±è´¥çš„æ¡ä»¶
>
> - å¯æ»¡è¶³ â†’ **æ¼æ´ï¼** å­˜åœ¨è¾“å…¥ä¼šè§¦å‘å¼‚å¸¸ã€‚
> - ä¸å¯æ»¡è¶³ â†’ **å®‰å…¨ï¼** æ­¤è·¯å¾„ä¸‹æ–­è¨€æ°¸çœŸã€‚

**é—®é¢˜ï¼šPath explosion**

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750245769791-59.png" alt="img" style="zoom:50%;" />

**è§£å†³æ–¹æ³•ï¼šåˆå¹¶**

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618192328034.png" alt="image-20250618192328034" style="zoom:50%;" />

**æ–°é—®é¢˜ï¼šæ— é™å¾ªç¯**

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618200130023.png" alt="image-20250618200130023" style="zoom:33%;" />

**è§£å†³æ–¹æ³•ï¼š**

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618200233577.png" alt="image-20250618200233577" style="zoom: 33%;" />

**Concolic Executionï¼šConcrete + Symbolic Execution**è¿è¡Œæ—¶è¿›è¡Œç¬¦å·æ‰§è¡Œ

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618200400378.png" alt="image-20250618200400378" style="zoom:33%;" />

## Propositional Logic (PL)

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618201623523.png" alt="image-20250618201623523" style="zoom: 33%;" />

**NNF (Negation Normal Form) - å¦å®šèŒƒå¼**

**å®šä¹‰**ï¼š

- å…¬å¼ä¸­**åªå…è®¸åœ¨åŸå­å‘½é¢˜ï¼ˆå˜é‡æˆ–å¸¸é‡ï¼‰å‰å‡ºç°å¦å®šç¬¦ `Â¬`**ã€‚

- **ä¸å…è®¸**ï¼š`Â¬` ä½œç”¨äºå¤åˆè¡¨è¾¾å¼ï¼ˆå¦‚ `Â¬(p âˆ§ q)`ï¼‰ï¼Œä¹Ÿä¸å…è®¸è•´å« `â‡’` å’Œç­‰ä»· `âŸº`ã€‚

**DNF (Disjunctive Normal Form) - æå–èŒƒå¼**

**CNF (Conjunctive Normal Form) - åˆå–èŒƒå¼**

**Tseitin Transformation**

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618203820316.png" alt="image-20250618203820316" style="zoom: 33%;" />

### SAT

**SAT é—®é¢˜** æ˜¯æŒ‡åˆ¤æ–­ä¸€ä¸ª**å‘½é¢˜é€»è¾‘å…¬å¼ï¼ˆPL å…¬å¼ï¼‰**æ˜¯å¦å­˜åœ¨ä¸€ç»„çœŸå€¼èµ‹å€¼ï¼ˆå³ç»™æ‰€æœ‰å˜é‡åˆ†é… `âŠ¤` æˆ– `âŠ¥`ï¼‰ï¼Œä½¿å¾—å…¬å¼è®¡ç®—ç»“æœä¸º `âŠ¤`ï¼ˆçœŸï¼‰ã€‚

**DPLL**

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618204930711.png" alt="image-20250618204930711" style="zoom: 33%;" />

**æ­¥éª¤åˆ†è§£**

1. **åˆå§‹çŠ¶æ€**ï¼š
   å…¬å¼ï¼š`(p âˆ¨ Â¬q) âˆ§ (Â¬p âˆ¨ r) âˆ§ (Â¬r âˆ¨ s)`
   èµ‹å€¼ï¼š`Ïƒ = {}`
2. **å†³ç­–**ï¼šé€‰æ‹©å˜é‡ `p`ï¼ˆå‡è®¾æŒ‰é¡ºåºé€‰ï¼‰
   - åˆ†æ”¯ 1ï¼šå°è¯•p=âŠ¤
     - å•å…ƒä¼ æ’­ï¼š
       - å­å¥ `(p âˆ¨ Â¬q)` â†’ `âŠ¤ âˆ¨ Â¬q = âŠ¤` â†’ åˆ é™¤
       - å­å¥ `(Â¬p âˆ¨ r)` â†’ `âŠ¥ âˆ¨ r = r` â†’ ç®€åŒ–ä¸º `(r)`
       - å¼ºåˆ¶ `r=âŠ¤`
     - å­å¥ `(Â¬r âˆ¨ s)` â†’ `Â¬âŠ¤ âˆ¨ s = s` â†’ å¼ºåˆ¶ `s=âŠ¤`
     - **å…¬å¼ä¸ºç©º â†’ SATï¼è§£ï¼š`p=âŠ¤, r=âŠ¤, s=âŠ¤`ï¼ˆ`q` ä»»æ„ï¼‰**
3. **è‹¥åˆ†æ”¯ 1 å¤±è´¥**ï¼šå›æº¯å°è¯• `p=âŠ¥`
   - å­å¥ `(p âˆ¨ Â¬q)` â†’ `âŠ¥ âˆ¨ Â¬q = Â¬q` â†’ å¼ºåˆ¶ `q=âŠ¥`
   - å­å¥ `(Â¬p âˆ¨ r)` â†’ `âŠ¤ âˆ¨ r = âŠ¤` â†’ åˆ é™¤
   - å­å¥ `(Â¬r âˆ¨ s)` æœªç®€åŒ– â†’ éœ€ç»§ç»­é€‰æ‹©å˜é‡ï¼ˆå®é™…å·²å¾—è§£ï¼Œæ— éœ€æ­¤åˆ†æ”¯ï¼‰

![image-20250618204857185](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618204857185.png)

## â­Pointer Analysis

### Andersen & Steensgaard Algorithm

<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618210212058.png" alt="image-20250618210212058" style="zoom:67%;" />

è®¡ç®—**è¿‡è¿‘ä¼¼ï¼ˆMayï¼‰**çš„æŒ‡é’ˆæŒ‡å‘é›†åˆï¼ˆ`pts(x)` = å˜é‡ `x` å¯èƒ½æŒ‡å‘çš„å¯¹è±¡é›†åˆï¼‰ã€‚

![image-20250618211442917](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618211442917.png)

![image-20250618212018297](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618212018297.png)

## Datalog-Based Analysis

`def(B, N, x)` è¡¨ç¤º"åœ¨å— B çš„ç¬¬ N è¡Œå®šä¹‰äº†å˜é‡ x"ã€‚

`succ(B, N, C)`è¡¨ç¤ºCæ˜¯Bçš„åç»§ä¸”Bæœ‰Næ¡statement

`rd(B, N, C, M, X)`Cä¸­ç¬¬Mè¡Œå®šä¹‰çš„xåœ¨Bä¸­ç¬¬Nè¡Œä½¿ç”¨

å‡ ä¸ªæ¨å¯¼å¼ï¼š

â€¢ rd(B, N, B, N, X) :- def(B, N, X) 

â€¢ rd(B, N, C, M, X) :- rd(B, N-1, C, M, X), def(B, N, Y), Xâ‰ Y 

â€¢ rd(B, 0, C, M, X) :- rd(D, N, C, M, X), succ(D, N, B)

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618213057739.png" alt="image-20250618213057739" style="zoom:33%;" />

<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618213121974.png" alt="image-20250618213121974" style="zoom:50%;" />

# The Compilersâ€™ Back End

## Instruction Selection

**ä¸‰ç±»æŒ‡ä»¤**

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618213244542.png" alt="image-20250618213244542" style="zoom:33%;" />

**Addressing Modes**

```
LD R1, a(R2)
LD R1, 100(R2)
LD R1, *R2
LD R1, *100(R2)
LD R1, #100
â€¢ LD R, addr
â€¢ ST addr, R
```

![image-20250618213503162](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618213503162.png)

## â­Register Allocation

### Local

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618213540636.png" alt="image-20250618213540636" style="zoom:33%;" />

MAXLIVE=4ï¼Œåªéœ€è¦4ä¸ªå¯„å­˜å™¨åˆç†åˆ†é…å°±èƒ½æ‰§è¡Œå®Œæ•´ä¸ªä»»åŠ¡ï¼ˆå‰ææ˜¯ç‰©ç†å¯„å­˜å™¨æœ‰4ä¸ªï¼‰

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618213701769.png" alt="image-20250618213701769" style="zoom:33%;" />

å¦‚æœç‰©ç†å¯„å­˜å™¨å°‘äº4ä¸ªï¼Œæ¯”å¦‚è¯´3ä¸ª

â€‹	<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750254150810-62.png" alt="img" style="zoom:50%;" />

å°½é‡æŒ‘é€‰è·ç¦»ä¸‹ä¸€æ¬¡ä½¿ç”¨æ¯”è¾ƒä¹…çš„spill

### Global

ç”»conflict graph

â€¢ Vertex: virtual registers;  

â€¢ Edges: virtual registers that have **overlapping live range**

**Chaitinâ€™s Algorithm**

 åˆ é™¤è¿™äº›é¡¶ç‚¹å¹¶å°†å®ƒä»¬æ¨é€åˆ°å †æ ˆä¸­ï¼Œç›´åˆ°å›¾å½¢å˜ä¸ºç©ºï¼ˆç¨åä¸ºå®ƒä»¬ç€è‰²ï¼‰

1. éå†å†²çªå›¾ï¼Œæ‰¾åˆ°æ‰€æœ‰**åº¦æ•° <k çš„èŠ‚ç‚¹**ã€‚
2. ç§»é™¤è¿™äº›èŠ‚ç‚¹ï¼ˆå› å…¶å¿…ç„¶å¯ç€è‰²ï¼‰ï¼Œå¹¶å‹å…¥æ ˆã€‚
3. é‡å¤ç›´åˆ°å›¾ä¸­**ä»…å‰©åº¦æ•° â‰¥k çš„èŠ‚ç‚¹æˆ–å›¾ä¸ºç©º**ã€‚

![image-20250618214555560](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618214555560.png)

è‹¥æœ‰**åº¦æ•° â‰¥k çš„èŠ‚ç‚¹**

1. å°†æº¢å‡ºå€™é€‰èŠ‚ç‚¹åŠ å…¥æº¢å‡ºåˆ—è¡¨ï¼ˆSpill Listï¼‰
2. é‡å¤ä¸Šæ­¥éª¤

<img src="ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /1750254466453-65.png" alt="img" style="zoom: 67%;" />



## â­Instruction Scheduling

**True/Fake Dependence** 

 å…·ä½“ç±»å‹ï¼š

- RAWï¼ˆRead After Writeï¼‰ï¼šæŒ‡ä»¤Aå†™å…¥çš„æ•°æ®è¢«æŒ‡ä»¤Bè¯»å–ï¼ŒBå¿…é¡»åœ¨Aå®Œæˆåæ‰§è¡Œã€‚
- WARï¼ˆWrite After Readï¼‰ï¼šæŒ‡ä»¤Aè¯»å–çš„æ•°æ®è¢«æŒ‡ä»¤Bå†™å…¥ï¼ŒAå¿…é¡»åœ¨Bä¿®æ”¹æ•°æ®å‰å®Œæˆè¯»å–ã€‚
- WAWï¼ˆWrite After Writeï¼‰ï¼šæŒ‡ä»¤Aå’ŒæŒ‡ä»¤Bå†™å…¥åŒä¸€ç›®æ ‡ï¼ˆå¯„å­˜å™¨æˆ–å†…å­˜ï¼‰ï¼Œå¿…é¡»æŒ‰ç¨‹åºé¡ºåºæäº¤ç»“æœã€‚

 ç›®æ ‡ï¼šé€šè¿‡**é‡å‘½å**æ¥åˆ é™¤ï¼ˆå‡ï¼‰ä¾èµ–ï¼ˆWARï¼ŒWAWï¼‰ï¼Œ**ä¿ç•™çœŸä¾èµ–ï¼ˆRAWï¼‰**

**Dependence Graph**

![image-20250618215018308](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618215018308.png)

![image-20250618215111436](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618215111436.png)

![image-20250618215119873](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618215119873.png)

![image-20250618215612290](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618215612290.png)

![image-20250618215622674](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618215622674.png)

![image-20250618215638424](ç¼–è¯‘åŸç†é¢˜å‹å¤ä¹ /image-20250618215638424.png)

